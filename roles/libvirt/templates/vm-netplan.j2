# static configuration
network:
  version: 2
  ethernets:
{% for interface in interfaces %}
    "{{ interface.interface_name }}":
{% if interface.address is defined %}
      dhcp4: no
      addresses: ["{{ interface.address }}"]
{% else %}
      dhcp4: yes
{% endif %}
{% if interface.gateway is defined %}
      gateway4: "{{ interface.gateway }}"
{% endif %}
{% if interface.nameservers is defined %}
      nameservers:
{% if interface.domain_name is defined %}
        search: ["{{ interface.domain_name }}"]
{% endif %}
        addresses: ["{{ interface.nameservers }}"]
{% endif %}

